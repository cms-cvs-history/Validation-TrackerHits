process TrackerHits  = {

        
    # NOTE : if one wants to run with the SiStripDigitizer,
    #        then mag.field in the OscarProducer should be
    #        turned ON; otherwise it gets (re)created by the
    #        SiStripDigitizer, which seems to corrupt at all 
    #        the edm::Event record
     

    # Step 1 : Event Generation

    # flat random E-gun, single muon
    # 
    # if you want another particle type, replace the PartID
    # (standard STDHEP numbering scheme)
    #
    # to run it along with CMS detector simulation
    # (OscarProducer) make sure to select QGSP physics
    # list, instead DummyPhysics ("Dummy" has only EM 
    # process and wont know to model interactions of
    # hadrons with matter)
    #
     source = PoolSource 
      {
        untracked vstring fileNames = {'file:data/Muon.root'}
        untracked string catalog = 'PoolFileCatalog.xml'
        untracked int32 maxEvents = 18000
      }

   include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
   #NOTE in 0_3_0_pre5 mag field and geomeetry are interfereing again
   #Magnetic Field
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   #Geometry   
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi" 
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
#    es_module = TrackerGeometricDetESModule {}
		
		
   # Step 2 : CMS Detector Simulation

   # CMS Det.Simulation module (OscarProducer)
   #
   include "SimG4Core/Application/data/SimG4Object.cfi"      

   # Step 4 : Output module
   #
   module o1 = PoolOutputModule 
   {  
      untracked string fileName = "simhitoutput.root" 
   }

   # Step 5 : setup TrackerHitProducer
   module thp = TrackerHitProducer
   {
      untracked string Name = "TrackerHitProducer"
      untracked int32 Verbosity = 3  # verbosity inclusive. 0 provides no output
                                     # 1 provides basic output
                                     # 2 provides output of the fill step
                                     # 3 provides output of the store step
      string Label = "TrkHits"
      PSet ProvenanceLookup =
      {
         untracked bool GetAllProvenances = false
         untracked bool PrintProvenanceInfo = false
      }
   
#   InputTag PxlBrlLowSrc = SimG4Object:TrackerHitsPixelBarrelLowTof
#   InputTag PxlBrlHighSrc = SimG4Object:TrackerHitsPixelBarrelHighTof
#   InputTag PxlFwdLowSrc = SimG4Object:TrackerHitsPixelEndcapLowTof
#   InputTag PxlFwdHighSrc = SimG4Object:TrackerHitsPixelEndcapHighTof

#   InputTag SiTIBLowSrc = SimG4Object:TrackerHitsTIBLowTof
#   InputTag SiTIBHighSrc = SimG4Object:TrackerHitsTIBHighTof
#   InputTag SiTOBLowSrc = SimG4Object:TrackerHitsTOBLowTof
#   InputTag SiTOBHighSrc = SimG4Object:TrackerHitsTOBHighTof
#   InputTag SiTIDLowSrc = SimG4Object:TrackerHitsTIDLowTof
#   InputTag SiTIDHighSrc = SimG4Object:TrackerHitsTIDHighTof
#   InputTag SiTECLowSrc = SimG4Object:TrackerHitsTECLowTof
#   InputTag SiTECHighSrc = SimG4Object:TrackerHitsTECHighTof
   
   InputTag PxlBrlLowSrc = g4SimHits:TrackerHitsPixelBarrelLowTof
   InputTag PxlBrlHighSrc = g4SimHits:TrackerHitsPixelBarrelHighTof
   InputTag PxlFwdLowSrc = g4SimHits:TrackerHitsPixelEndcapLowTof
   InputTag PxlFwdHighSrc = g4SimHits:TrackerHitsPixelEndcapHighTof#
#
   InputTag SiTIBLowSrc = g4SimHits:TrackerHitsTIBLowTof
   InputTag SiTIBHighSrc = g4SimHits:TrackerHitsTIBHighTof
   InputTag SiTOBLowSrc = g4SimHits:TrackerHitsTOBLowTof
   InputTag SiTOBHighSrc = g4SimHits:TrackerHitsTOBHighTof
   InputTag SiTIDLowSrc = g4SimHits:TrackerHitsTIDLowTof
   InputTag SiTIDHighSrc = g4SimHits:TrackerHitsTIDHighTof
   InputTag SiTECLowSrc = g4SimHits:TrackerHitsTECLowTof
   InputTag SiTECHighSrc = g4SimHits:TrackerHitsTECHighTof
   }
#   # Setup output text
#   service = MessageLogger
#   {
#       vstring destinations = { "cout" }
#       PSet cout =
#       {
#          #int32 lineLength = 132
#          #bool noLineBreaks = true
#	  PSet default = { int32 limit = 0 }
#       }
#   }
   
   # Now order modules execution
#   path p1 = { SimG4Object, thp }
    path p1 = { g4SimHits, thp }
   endpath outpath = { o1 }
		
}
